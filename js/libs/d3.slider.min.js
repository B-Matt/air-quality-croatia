d3.slider=function(){"use strict";var a,c,i,e,l,s,o,u,d,f,g,r,h=0,v=100,m=40,p=10,x=6,k={top:35,right:25,bottom:15,left:25},w=0,A=!1;function b(t){t.each(function(){a=d3.select(this).classed("d3slider",!0),d=parseInt(a.style("width"),10)-(k.left+k.right),i=i||h,s=d3.scale.linear().domain([h,v]).range([0,d]).clamp(!0),(c=a.append("svg").attr("class","d3slider-axis").attr("width",d+k.left+k.right).attr("height",m+k.top+k.bottom).append("g").attr("transform","translate("+k.left+","+k.top+")")).append("rect").attr("class","d3slider-rect-range").attr("width",d).attr("height",p),A&&c.append("rect").attr("class","d3slider-rect-value").attr("width",s(i)).attr("height",p);var t=d3.svg.axis().scale(s).orient("bottom");0!=w?(t.ticks(w),t.tickSize(x)):l?(t.tickValues(l),t.tickSize(x)):(t.ticks(0),t.tickSize(0)),o&&t.tickFormat(o),c.append("g").attr("transform","translate(0,"+p+")").call(t);var e=[i];u=c.selectAll(".dragger").data(e).enter().append("g").attr("class","dragger").attr("transform",function(t){return"translate("+s(t)+")"});var r=null,r=(o||d3.format(""))(i);u.append("text").attr("x",0).attr("y",-15).attr("text-anchor","middle").attr("class","draggertext").text(r),u.append("circle").attr("class","dragger-outer").attr("r",10).attr("transform",function(t){return"translate(0,6)"}),u.append("circle").attr("class","dragger-inner").attr("r",-1).attr("transform",function(t){return"translate(0,6)"});var n=d3.behavior.drag();n.on("drag",b.drag),u.call(n),c.on("click",b.click)})}return b.draggerTranslateFn=function(){return function(t){return"translate("+s(t)+")"}},b.click=function(){var t=d3.event.offsetX||d3.event.layerX;b.move(t)},b.drag=function(){var t=d3.event.x;b.move(t+k.left)},b.move=function(t){var e,r,a=s.invert(t-k.left),n=[i=null!=g?(e=g.reduce(function(t,e,r,n){return e<a?e:t}),r=g.indexOf(e)<g.length-1?g[g.indexOf(e)+1]:e,a-e<=r-a?e:r):a];c.selectAll(".dragger").data(n).attr("transform",function(t){return"translate("+s(t)+")"});var l=null,l=(o||d3.format(""))(i);c.selectAll(".dragger").select("text").text(l),A&&c.selectAll(".d3slider-rect-value").attr("width",s(i)),f&&f(b)},b.min=function(t){return arguments.length?(h=t,b):h},b.max=function(t){return arguments.length?(v=t,b):v},b.classPrefix=function(t){return arguments.length?(e=t,b):e},b.tickValues=function(t){return arguments.length?(l=t,b):l},b.ticks=function(t){return arguments.length?(w=t,b):w},b.stepValues=function(t){return arguments.length?(g=t,b):g},b.tickFormat=function(t){return arguments.length?(o=t,b):o},b.value=function(t){return arguments.length?(i=t,b):i},b.showRange=function(t){return arguments.length?(A=t,b):A},b.callback=function(t){return arguments.length?(f=t,b):f},b.setValue=function(t){var e=s(t)+k.left;b.move(e)},b.mousemove=function(){var t=d3.mouse(this)[0],e=b.getNearest(s.invert(t),g);r.attr("transform","translate("+s(e)+",0)"),r.selectAll("text").text(e)},b.getNearest=function(a,t){var e=t.reduce(function(t,e,r,n){return e<a?e:t}),r=t[t.indexOf(e)+1];return i-e<=r-i?e:r},b.destroy=function(){return a.selectAll("svg").remove(),b},b};